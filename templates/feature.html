{% extends embed|yesno:"_base_embed.html,_base.html" %}
{% load inline_file %}

{% block page_title %}{% if feature.name %}{{ feature.name }} - {% endif %}{% endblock %}

{% block meta %}
  {% if feature.summary %}
    <meta name="description" content="{{ feature.summary }}">
  {% endif %}
{% endblock %}

{% block css %}
  <style>{% inline_file "/static/css/features/feature.css" %}</style>
{% endblock %}

{% block rss %}
  <link rel="alternate" type="application/rss+xml" href="https://www.chromestatus.com/features.xml" title="All features" />
{% endblock %}

{% block subheader %}
<div id="subheader" style="display:block">
  <h2 id="breadcrumbs">
    <a href="/features/{{ feature_id }}">
      <iron-icon icon="chromestatus:arrow-back"></iron-icon>
      Feature: {{ feature.name }}
    </a>
  </h2>
</div>
{% endblock %}


{% block content %}  
  <div id="feature">
    {% include "guide/metadata.html" %}
  </div>

  <chromedash-feature-detail
    feature='{{ feature_json }}'
    process='{{ process_json }}'
    fielddefs='{{ field_defs_json }}'
    dismissedcues='{{ user.dismissed_cues }}'>
  </chromedash-feature-detail>

  <section id="updated">
    <p><span>Last updated on {{ updated_display }}</span></p>
  </section>
{% endblock %}

{% block js %}
  <script>
    (function() {
      'use strict';

      // Variables used in feature-page.js
      const FEATURE_ID = '{{ feature.id }}';
      const FEATURE_NAME = '{{ feature.name|escapejs }}';
      const FEATUER_SUMMARY = '{{ feature.summary|escapejs }}';
      const SHOW_TOAST = {% if was_updated %}true{% else %}false{% endif %};

      {% inline_file "/static/js/notifications.min.js" %}
      {% inline_file "/static/js/feature-page.min.js" %}
    })();
  </script>
{% endblock %}
